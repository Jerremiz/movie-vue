import{x as o,y as a}from"./index-7FuSJdjK.js";const i=o("comment",{state:()=>({movieComments:[],userComments:[],loading:!1,error:null}),actions:{async fetchMovieComments(e){this.loading=!0;try{const t=await a.getMovieComments(e);return this.movieComments=t.data,t.data}catch(t){throw this.error="获取电影评论失败",t}finally{this.loading=!1}},async fetchUserComments(e){this.loading=!0;try{const t=await a.getUserComments(e);return this.userComments=t.data,t.data}catch(t){throw this.error="获取用户评论失败",t}finally{this.loading=!1}},async addComment(e,t,s){this.loading=!0;try{const r=await a.addComment(e,t,s);return await this.fetchMovieComments(t),r.data}catch(r){throw this.error="添加评论失败",r}finally{this.loading=!1}},async deleteComment(e,t,s){this.loading=!0;try{const r=await a.deleteComment(e,t);return s&&await this.fetchMovieComments(s),await this.fetchUserComments(e),r.data}catch(r){throw this.error="删除评论失败",r}finally{this.loading=!1}}}});export{i as u};
