import{_ as x,u as h,r as k,c as C,a as F,b as R,d as o,w as r,e as t,f as B,o as E,g as c,h as _,E as g}from"./index-7FuSJdjK.js";const N={class:"login-container"},q={__name:"LoginView",setup(L){const d=B(),i=h(),n=k(null),f=C(()=>i.loading),s=F({username:"",password:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,message:"密码长度不能少于3个字符",trigger:"blur"}]},V=async()=>{n.value&&await n.value.validate(async m=>{var e,l;if(m)try{await i.login(s.username,s.password),g.success("登录成功"),d.push("/")}catch(a){console.error("登录错误:",a),g.error(((l=(e=a.response)==null?void 0:e.data)==null?void 0:l.message)||"登录失败")}else return!1})},b=()=>{d.push("/register")};return(m,e)=>{const l=t("el-input"),a=t("el-form-item"),p=t("el-button"),v=t("el-form"),y=t("el-card");return E(),R("div",N,[o(y,{class:"login-card"},{default:r(()=>[e[4]||(e[4]=c("div",{class:"login-header"},[c("h2",null,"登录")],-1)),o(v,{model:s,ref_key:"loginFormRef",ref:n,rules:w,"label-width":"80px",size:"large",class:"centered-form"},{default:r(()=>[o(a,{label:"用户名",prop:"username"},{default:r(()=>[o(l,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.username=u),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(a,{label:"密码",prop:"password"},{default:r(()=>[o(l,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),o(a,null,{default:r(()=>[o(p,{type:"primary",loading:f.value,onClick:V},{default:r(()=>e[2]||(e[2]=[_("登录")])),_:1,__:[2]},8,["loading"]),o(p,{onClick:b},{default:r(()=>e[3]||(e[3]=[_("注册账号")])),_:1,__:[3]})]),_:1})]),_:1},8,["model"])]),_:1,__:[4]})])}}},T=x(q,[["__scopeId","data-v-efe196f1"]]);export{T as default};
