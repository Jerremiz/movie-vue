import{_ as b,n as A,u as C,r as v,c as _,b as o,g as c,d as r,w as y,z as I,A as k,B as w,e as u,F as U,j as z,o as t,h as E,v as N,M as F,E as S}from"./index-7FuSJdjK.js";const K={class:"search-page"},j={class:"search-form"},P={key:0,class:"loading"},Q={key:1,class:"no-results"},T={key:2,class:"search-results"},q={class:"movie-grid"},D={key:3,class:"search-tips"},G={__name:"SearchView",setup(H){const a=A(),p=C(),i=v(""),d=v(!1),M=_(()=>a.loading),l=v([]),m=_(()=>p.isAuthenticated),h=_(()=>{var s;return(s=p.currentUser)==null?void 0:s.id}),V=s=>!m.value||!a.userMovieList.length?!1:a.userMovieList.some(e=>e.movieId.toString()===s.toString()),f=async()=>{if(!i.value.trim()){S.warning("请输入搜索关键词");return}try{l.value=[];const s=await a.searchMovies(i.value.trim());l.value=s,d.value=!0,m.value&&h.value&&await a.getUserMovieList(h.value)}catch(s){console.error("搜索失败:",s),S.error("搜索失败，请稍后重试")}};return(s,e)=>{const x=u("el-button"),B=u("el-input"),L=u("el-skeleton"),g=u("el-empty");return t(),o("div",K,[e[3]||(e[3]=c("h1",null,"搜索电影",-1)),c("div",j,[r(B,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value=n),placeholder:"输入电影名称...",class:"search-input","prefix-icon":k(w),onKeyup:I(f,["enter"])},{append:y(()=>[r(x,{icon:k(w),onClick:f},{default:y(()=>e[1]||(e[1]=[E("搜索")])),_:1,__:[1]},8,["icon"])]),_:1},8,["modelValue","prefix-icon"])]),M.value?(t(),o("div",P,[r(L,{rows:20,animated:""})])):d.value&&l.value.length===0?(t(),o("div",Q,[r(g,{description:"未找到相关电影","image-size":200})])):d.value?(t(),o("div",T,[e[2]||(e[2]=c("h2",null,"搜索结果",-1)),c("div",q,[(t(!0),o(U,null,z(l.value,n=>(t(),N(F,{key:n.id,movie:n,"is-in-list":V(n.id)},null,8,["movie","is-in-list"]))),128))])])):(t(),o("div",D,[r(g,{description:"输入关键词搜索电影","image-size":200})]))])}}},O=b(G,[["__scopeId","data-v-e9b5d0ed"]]);export{O as default};
