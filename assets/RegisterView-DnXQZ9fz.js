import{_ as x,u as h,r as g,a as E,b as R,d as r,w as t,e as n,f as C,o as F,g as f,h as c,E as _}from"./index-7FuSJdjK.js";const k={class:"register-container"},q={__name:"RegisterView",setup(B){const m=C(),w=h(),d=g(null),u=g(!1),s=E({name:"",password:"",confirmPassword:""}),b={name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名长度不能少于3个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,message:"密码长度不能少于3个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(i,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==s.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]},V=async()=>{d.value&&await d.value.validate(async i=>{var e,o;if(i){u.value=!0;try{const a={name:s.name,password:s.password};await w.register(a),_.success("注册成功，请登录"),m.push("/login")}catch(a){console.error("注册错误:",a),_.error(((o=(e=a.response)==null?void 0:e.data)==null?void 0:o.message)||"注册失败")}finally{u.value=!1}}else return!1})},v=()=>{m.push("/login")};return(i,e)=>{const o=n("el-input"),a=n("el-form-item"),p=n("el-button"),y=n("el-form"),P=n("el-card");return F(),R("div",k,[r(P,{class:"register-card"},{default:t(()=>[e[5]||(e[5]=f("div",{class:"register-header"},[f("h2",null,"注册")],-1)),r(y,{model:s,ref_key:"registerFormRef",ref:d,rules:b,"label-width":"80px",size:"large",class:"centered-form"},{default:t(()=>[r(a,{label:"用户名",prop:"name"},{default:t(()=>[r(o,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=l=>s.name=l),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),r(a,{label:"密码",prop:"password"},{default:t(()=>[r(o,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s.password=l),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),r(a,{label:"确认密码",prop:"confirmPassword"},{default:t(()=>[r(o,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>s.confirmPassword=l),type:"password",placeholder:"请再次输入密码","show-password":""},null,8,["modelValue"])]),_:1}),r(a,null,{default:t(()=>[r(p,{type:"primary",loading:u.value,onClick:V},{default:t(()=>e[3]||(e[3]=[c("注册")])),_:1,__:[3]},8,["loading"]),r(p,{onClick:v},{default:t(()=>e[4]||(e[4]=[c("返回登录")])),_:1,__:[4]})]),_:1})]),_:1},8,["model"])]),_:1,__:[5]})])}}},S=x(q,[["__scopeId","data-v-2bb6844d"]]);export{S as default};
