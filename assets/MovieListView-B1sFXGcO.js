import{_ as w,n as L,u as x,c as r,i as C,b as s,g as V,d as n,e as c,w as a,F as b,j as B,E as I,f as S,o as e,h as y,v as E,M as N}from"./index-7FuSJdjK.js";const T={class:"movie-list-page"},U={key:0,class:"loading"},z={key:1,class:"error"},F={key:2,class:"empty-list"},j={key:3,class:"movie-grid"},A={__name:"MovieListView",setup(R){const d=S(),i=L(),k=x(),f=r(()=>i.loading),u=r(()=>i.error),_=r(()=>i.userMovieList),v=r(()=>{var o;return(o=k.currentUser)==null?void 0:o.id}),p=async()=>{if(!v.value){I.warning("请先登录"),d.push("/login");return}try{await i.getUserMovieList(v.value)}catch(o){console.error("获取影单失败:",o)}},h=()=>{d.push("/trending/week")};return C(()=>{p()}),(o,t)=>{const M=c("el-skeleton"),m=c("el-button"),g=c("el-empty");return e(),s("div",T,[t[2]||(t[2]=V("h1",null,"我的影单",-1)),f.value?(e(),s("div",U,[n(M,{rows:20,animated:""})])):u.value?(e(),s("div",z,[n(g,{description:u.value,"image-size":200},{default:a(()=>[n(m,{type:"primary",onClick:p},{default:a(()=>t[0]||(t[0]=[y("重试")])),_:1,__:[0]})]),_:1},8,["description"])])):_.value.length===0?(e(),s("div",F,[n(g,{description:"您的影单还是空的","image-size":200},{default:a(()=>[n(m,{type:"primary",onClick:h},{default:a(()=>t[1]||(t[1]=[y("去发现电影")])),_:1,__:[1]})]),_:1})])):(e(),s("div",j,[(e(!0),s(b,null,B(_.value,l=>(e(),E(N,{key:l.movieId,movie:{...l,id:l.movieId},"is-in-list":!0},null,8,["movie"]))),128))]))])}}},D=w(A,[["__scopeId","data-v-ae42a92b"]]);export{D as default};
